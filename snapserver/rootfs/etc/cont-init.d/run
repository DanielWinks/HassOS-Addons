#!/usr/bin/with-contenv bashio

pipe=/share/snapfifo
if [[ ! -p $pipe ]]; then
  mkfifo /share/snapfifo ||
    bashio::exit.nok "Could not create named pipe!"
  chmod 666 /share/snapfifo ||
    bashio::exit.nok "Could not set permissions on pipe!"
fi

if ! bashio::fs.directory_exists '/data/snapcast'; then
  mkdir -p /data/snapcast ||
    bashio::exit.nok "Could not create Snapcast config folder!"
fi
